# Boiler Configuration
# This file configures the central boiler control and safety interlocks

boiler:
  # Boiler control entity
  # OpenTherm heating control via climate.turn_on/turn_off services
  entity_id: climate.dummy

  # OpenTherm mode
  # Note: The entity_id climate.opentherm_heating uses climate.turn_on/turn_off
  # No setpoint needed - the entity manages its own target temperature
  opentherm: boiler
  
  # Pump overrun handling
  # Boiler pump continues to run after heating stops to dissipate residual heat
  # TRVs must remain open during this period to allow water to flow
  pump_overrun_s: 150  # ~3 minutes (adjust after measuring actual boiler behavior)
  
  # Anti-short-cycling protection
  # Prevents rapid on/off cycles that damage the boiler and waste energy
  anti_cycling:
    # Minimum time boiler must stay ON once started (defautl 180 seconds)
    min_on_time_s: 180
    # Minimum time boiler must stay OFF once stopped (default 180 seconds)
    min_off_time_s: 180
    # Delay before turning off when demand stops (seconds)
    # Prevents cycling when users adjust setpoints or rooms briefly stop calling
    off_delay_s: 30
  
  # TRV-open interlock safety configuration
  # Ensures the boiler never runs without sufficient flow path available
  interlock:
    # Minimum total valve opening percentage required before boiler can turn on
    # Sum of all TRV open percentages must be >= this value
    # Default: 100 (ensures water always has somewhere to go)
    min_valve_open_percent: 100
  
  # Emergency safety room (fail-safe for hot water flow)
  # If boiler is ON but no rooms calling for heat, this room's valve will be
  # forced open to 100% to ensure there's a path for hot water.
  # This is a CRITICAL safety feature - never run boiler with all valves closed!
  safety_room: games  # Dining room - chosen as it's centrally located
